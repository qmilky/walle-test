<?php    // 购物车控制器namespace Home;use DB;    class CartController    {        // 加入购物车        public function toCart()        {            $gid = $_GET['gid'];   // 商品ID                         /*                // 有session                    等                    不做                    不等                        做                // 没有session                        做            */                            // 如果session中没值, 或者, 有值但不相等            if (empty($_SESSION['token']) || $_SESSION['token']!= $_GET['token']) {                               // 1)保存                   $_SESSION['token'] = $_GET['token'];                                      // 2)正常操作                   $gid = $_GET['gid'];   // 商品ID    // 此句特殊, if(假) 的情况也应该执行,所有提到最上面                   $bcnt = $_GET['bcnt']; // 购买数量                                   // 获取该种商品的信息,放入session中                   if (empty($_SESSION['cart'][$gid])){                      $_SESSION['cart'][$gid] = (new DB('shop_goods'))->where("gid=$gid")->find();                      $_SESSION['cart'][$gid]->bcnt = $bcnt;                   } else {                        $_SESSION['cart'][$gid]->bcnt += $bcnt;                   }                        }                                include('./Views/Home/Cart/tocart.html');                }                                // 浏览购物车        public function index()        {            include('./Views/Home/Cart/cartlist.html');        }                               // 加1        public function jia()        {            $gid = $_GET['gid'];            $_SESSION['cart'][$gid] -> bcnt++;            header('location:./index.php?m=home&c=cart&a=index');            die;        }                // 减1        public function jian()        {            $gid = $_GET['gid'];            $_SESSION['cart'][$gid] -> bcnt--;            if ($_SESSION['cart'][$gid] -> bcnt<1){                $_SESSION['cart'][$gid] -> bcnt = 1;            }            header('location:./index.php?m=home&c=cart&a=index');            die;        }                // 移除某个商品        public function del()        {            $gid = $_GET['gid'];            unset($_SESSION['cart'][$gid]);            header('location:./index.php?m=home&c=cart&a=index');            die;        }            }